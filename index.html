<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#ffecd2" id="themeColor">
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="365 D√≠as de Luz">
    <title>365 D√≠as de Luz</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: Georgia, serif;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            transition: background 1s ease;
        }
        
        body.night-mode {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        }
        
        body.night-mode .container {
            background: linear-gradient(to bottom, #34495e 0%, #2c3e50 100%);
            color: #ecf0f1;
        }
        
        body.night-mode h1,
        body.night-mode .day-number,
        body.night-mode .date-display,
        body.night-mode .subtitle {
            color: #f39c12 !important;
        }
        
        body.night-mode .message-box {
            background: #2c3e50;
            border-color: #34495e;
            border-left-color: #f39c12;
        }
        
        body.night-mode .message-text {
            color: #ecf0f1;
        }
        
        body.night-mode .reflection-box {
            background: rgba(52, 73, 94, 0.7);
            border-color: #f39c12;
        }
        
        body.night-mode .reflection-box textarea {
            background: #34495e;
            color: #ecf0f1;
            border-color: #2c3e50;
        }
        
        body.night-mode .user-greeting {
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
            color: #f39c12;
            border-color: #2c3e50;
        }
        
        body.rainy-mode {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        body.rainy-mode .container {
            background: linear-gradient(to bottom, #e8eaf6 0%, #c5cae9 100%);
        }
        
        body.rainy-mode .message-box {
            border-left-color: #5c6bc0;
            border-color: #c5cae9;
        }
        
        .rain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .raindrop {
            position: absolute;
            width: 2px;
            height: 50px;
            background: linear-gradient(to bottom, transparent, rgba(174, 194, 224, 0.5));
            animation: fall linear infinite;
        }
        
        @keyframes fall {
            to { transform: translateY(100vh); }
        }
        
        .weather-indicator {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2em;
            animation: float 3s ease-in-out infinite;
        }
        
        body.month-0 { background: linear-gradient(135deg, #e0f7fa 0%, #80deea 100%); }
        body.month-1 { background: linear-gradient(135deg, #fce4ec 0%, #f48fb1 100%); }
        body.month-2 { background: linear-gradient(135deg, #fff9c4 0%, #ffd54f 100%); }
        body.month-3 { background: linear-gradient(135deg, #e8f5e9 0%, #81c784 100%); }
        body.month-4 { background: linear-gradient(135deg, #fff3e0 0%, #ffb74d 100%); }
        body.month-5 { background: linear-gradient(135deg, #fff8e1 0%, #ffd54f 100%); }
        body.month-6 { background: linear-gradient(135deg, #f3e5f5 0%, #ba68c8 100%); }
        body.month-7 { background: linear-gradient(135deg, #e0f2f1 0%, #4db6ac 100%); }
        body.month-8 { background: linear-gradient(135deg, #efebe9 0%, #a1887f 100%); }
        body.month-9 { background: linear-gradient(135deg, #ffe0b2 0%, #ff8a65 100%); }
        body.month-10 { background: linear-gradient(135deg, #d7ccc8 0%, #8d6e63 100%); }
        body.month-11 { background: linear-gradient(135deg, #e1f5fe 0%, #4fc3f7 100%); }
        
        .container {
            background: linear-gradient(to bottom, #fffaf5 0%, #fff5eb 100%);
            border-radius: 20px;
            box-shadow: 0 25px 70px rgba(0,0,0,0.15);
            max-width: 700px;
            width: 100%;
            padding: 50px 45px;
            text-align: center;
            position: relative;
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 30px;
            width: 2px;
            height: 100%;
            background: linear-gradient(to bottom, transparent 0%, #ff9a76 20%, #ff9a76 80%, transparent 100%);
            opacity: 0.3;
        }
        
        .hidden { display: none; }
        
        h1 { color: #d4845c; font-size: 2.5em; margin-bottom: 15px; font-weight: 400; }
        
        .subtitle { color: #8b7355; font-style: italic; margin-bottom: 35px; font-size: 1em; }
        
        .login-emoji { 
            font-size: 5em; 
            margin-bottom: 25px;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
        
        .input-group {
            text-align: left;
            margin: 20px 0;
        }
        
        .input-group label {
            display: block;
            color: #8b4513;
            font-weight: 600;
            margin-bottom: 10px;
            font-family: 'Segoe UI', sans-serif;
        }
        
        input[type="text"], input[type="date"] {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #d4845c;
            border-radius: 12px;
            font-size: 1em;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
            font-family: Georgia, serif;
        }
        
        input:focus {
            outline: none;
            border-color: #ff9a76;
            box-shadow: 0 0 20px rgba(255, 154, 118, 0.2);
            background: white;
        }
        
        button {
            background: linear-gradient(135deg, #ffd89b 0%, #ff9a76 100%);
            color: white;
            border: none;
            padding: 12px 28px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 600;
            margin: 10px 5px;
            box-shadow: 0 4px 15px rgba(255, 154, 118, 0.3);
            transition: all 0.3s ease;
            font-family: 'Segoe UI', sans-serif;
        }
        
        button:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(255, 154, 118, 0.4);
        }
        
        button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            background: #ccc;
        }
        
        button.month-0 { background: linear-gradient(135deg, #4fc3f7 0%, #0288d1 100%); }
        button.month-1 { background: linear-gradient(135deg, #f06292 0%, #e91e63 100%); }
        button.month-2 { background: linear-gradient(135deg, #ffd54f 0%, #ffa000 100%); color: #333; }
        button.month-3 { background: linear-gradient(135deg, #81c784 0%, #4caf50 100%); }
        button.month-4 { background: linear-gradient(135deg, #ffb74d 0%, #ff9800 100%); }
        button.month-5 { background: linear-gradient(135deg, #ffee58 0%, #fbc02d 100%); color: #333; }
        button.month-6 { background: linear-gradient(135deg, #ba68c8 0%, #9c27b0 100%); }
        button.month-7 { background: linear-gradient(135deg, #4db6ac 0%, #00897b 100%); }
        button.month-8 { background: linear-gradient(135deg, #a1887f 0%, #6d4c41 100%); }
        button.month-9 { background: linear-gradient(135deg, #ff8a65 0%, #e64a19 100%); }
        button.month-10 { background: linear-gradient(135deg, #8d6e63 0%, #5d4037 100%); }
        button.month-11 { background: linear-gradient(135deg, #4fc3f7 0%, #0277bd 100%); }
        
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #ffe8d6;
        }
        
        .day-number {
            font-size: 2.5em;
            color: #d4845c;
            font-weight: bold;
        }
        
        .date-display {
            color: #8b7355;
            font-size: 1.1em;
            font-style: italic;
            text-align: right;
        }
        
        .theme-badge {
            display: inline-block;
            background: linear-gradient(135deg, #ffd89b 0%, #ff9a76 100%);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 3px 10px rgba(255, 154, 118, 0.3);
            font-family: 'Segoe UI', sans-serif;
            transition: all 0.5s ease;
        }
        
        .theme-badge.month-0 { background: linear-gradient(135deg, #4fc3f7 0%, #0288d1 100%); }
        .theme-badge.month-1 { background: linear-gradient(135deg, #f06292 0%, #e91e63 100%); }
        .theme-badge.month-2 { background: linear-gradient(135deg, #ffd54f 0%, #ffa000 100%); }
        .theme-badge.month-3 { background: linear-gradient(135deg, #81c784 0%, #4caf50 100%); }
        .theme-badge.month-4 { background: linear-gradient(135deg, #ffb74d 0%, #ff9800 100%); }
        .theme-badge.month-5 { background: linear-gradient(135deg, #ffee58 0%, #fbc02d 100%); }
        .theme-badge.month-6 { background: linear-gradient(135deg, #ba68c8 0%, #9c27b0 100%); }
        .theme-badge.month-7 { background: linear-gradient(135deg, #4db6ac 0%, #00897b 100%); }
        .theme-badge.month-8 { background: linear-gradient(135deg, #a1887f 0%, #6d4c41 100%); }
        .theme-badge.month-9 { background: linear-gradient(135deg, #ff8a65 0%, #e64a19 100%); }
        .theme-badge.month-10 { background: linear-gradient(135deg, #8d6e63 0%, #5d4037 100%); }
        .theme-badge.month-11 { background: linear-gradient(135deg, #4fc3f7 0%, #0277bd 100%); }
        
        .user-greeting {
            background: linear-gradient(135deg, #fff5eb 0%, #ffe8d6 100%);
            padding: 18px;
            border-radius: 12px;
            margin-bottom: 25px;
            color: #8b4513;
            font-weight: 600;
            border: 1px solid #ffe8d6;
            font-family: 'Segoe UI', sans-serif;
        }
        
        .message-box {
            background: white;
            border: 2px solid #ffe8d6;
            border-left: 5px solid #ff9a76;
            padding: 35px 30px;
            border-radius: 15px;
            margin-bottom: 25px;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            transition: all 0.5s ease;
            opacity: 0;
            animation: fadeIn 0.8s ease forwards;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
            position: relative;
        }
        
        .message-box.month-0 { border-left-color: #0288d1; border-color: #e0f7fa; }
        .message-box.month-1 { border-left-color: #e91e63; border-color: #fce4ec; }
        .message-box.month-2 { border-left-color: #ffa000; border-color: #fff9c4; }
        .message-box.month-3 { border-left-color: #4caf50; border-color: #e8f5e9; }
        .message-box.month-4 { border-left-color: #ff9800; border-color: #fff3e0; }
        .message-box.month-5 { border-left-color: #fbc02d; border-color: #fff8e1; }
        .message-box.month-6 { border-left-color: #9c27b0; border-color: #f3e5f5; }
        .message-box.month-7 { border-left-color: #00897b; border-color: #e0f2f1; }
        .message-box.month-8 { border-left-color: #6d4c41; border-color: #efebe9; }
        .message-box.month-9 { border-left-color: #e64a19; border-color: #ffe0b2; }
        .message-box.month-10 { border-left-color: #5d4037; border-color: #d7ccc8; }
        .message-box.month-11 { border-left-color: #0277bd; border-color: #e1f5fe; }
        
        .message-box::before {
            content: '"';
            position: absolute;
            top: 10px;
            left: 20px;
            font-size: 4em;
            color: #ffe8d6;
            font-family: Georgia, serif;
        }
        
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        
        .message-box:hover {
            transform: scale(1.02);
            box-shadow: 0 8px 20px rgba(255, 154, 118, 0.2);
        }
        
        .day-icon { 
            font-size: 2em; 
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        
        .message-text {
            color: #4a4a4a;
            font-size: 1.25em;
            line-height: 1.8;
            text-align: center;
            position: relative;
            z-index: 1;
        }
        
        .hashtag {
            display: inline-block;
            margin-top: 15px;
            color: #ff9a76;
            font-size: 0.9em;
            font-weight: 600;
            font-family: 'Segoe UI', sans-serif;
        }
        
        .reflection-box {
            background: rgba(255, 250, 240, 0.7);
            border: 2px dashed #d4845c;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            text-align: left;
        }
        
        .reflection-box label {
            display: block;
            color: #8b7355;
            font-size: 0.9em;
            margin-bottom: 10px;
            font-style: italic;
        }
        
        .reflection-box textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ffe8d6;
            border-radius: 8px;
            font-size: 0.95em;
            font-family: Georgia, serif;
            resize: vertical;
            min-height: 80px;
            background: white;
            transition: all 0.3s ease;
        }
        
        .reflection-box textarea:focus {
            outline: none;
            border-color: #ff9a76;
            box-shadow: 0 0 10px rgba(255, 154, 118, 0.2);
        }
        
        .locked-message {
            color: #999;
            font-style: italic;
        }
        
        .birthday-message {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ffd700 100%);
            border: 3px solid #ff9a76;
            padding: 40px;
            border-radius: 25px;
            margin-bottom: 25px;
            animation: birthday-celebration 2s ease-in-out infinite;
            box-shadow: 0 15px 50px rgba(255, 215, 0, 0.4);
            position: relative;
            overflow: hidden;
        }
        
        .birthday-message::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shine 3s ease-in-out infinite;
        }
        
        @keyframes birthday-celebration {
            0%, 100% {
                transform: scale(1) rotate(0deg);
                box-shadow: 0 15px 50px rgba(255, 215, 0, 0.4);
            }
            25% {
                transform: scale(1.03) rotate(-1deg);
                box-shadow: 0 20px 60px rgba(255, 215, 0, 0.6);
            }
            75% {
                transform: scale(1.03) rotate(1deg);
                box-shadow: 0 20px 60px rgba(255, 215, 0, 0.6);
            }
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        .birthday-emoji {
            font-size: 5em;
            animation: birthday-bounce 1.2s ease-in-out infinite;
            display: inline-block;
            filter: drop-shadow(0 5px 15px rgba(0,0,0,0.2));
        }
        
        @keyframes birthday-bounce {
            0%, 100% { transform: translateY(0) scale(1); }
            25% { transform: translateY(-30px) scale(1.1) rotate(-5deg); }
            50% { transform: translateY(0) scale(1.05); }
            75% { transform: translateY(-15px) scale(1.1) rotate(5deg); }
        }
        
        .birthday-text {
            position: relative;
            z-index: 1;
            animation: text-glow 2s ease-in-out infinite;
        }
        
        @keyframes text-glow {
            0%, 100% { text-shadow: 0 0 10px rgba(139, 69, 19, 0.3); }
            50% { text-shadow: 0 0 20px rgba(139, 69, 19, 0.5), 0 0 30px rgba(255, 215, 0, 0.3); }
        }
        
        .birthday-stars {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
        }
        
        .star {
            position: absolute;
            font-size: 1.5em;
            animation: twinkle 1.5s ease-in-out infinite;
            opacity: 0;
        }
        
        @keyframes twinkle {
            0%, 100% {
                opacity: 0;
                transform: scale(0) rotate(0deg);
            }
            50% {
                opacity: 1;
                transform: scale(1.5) rotate(180deg);
            }
        }
        
        .confetti {
            position: fixed;
            width: 12px;
            height: 12px;
            animation: confetti-fall 4s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
            z-index: 9999;
        }
        
        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg) scale(0.5);
                opacity: 0.3;
            }
        }
        
        .balloon {
            position: absolute;
            font-size: 2em;
            animation: float-up 4s ease-in infinite;
        }
        
        @keyframes float-up {
            0% {
                transform: translateY(0) translateX(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-200px) translateX(30px) rotate(20deg);
                opacity: 0;
            }
        }
        
        .logout-btn {
            background: linear-gradient(135deg, #ffb3b3 0%, #ff8888 100%);
            font-size: 0.85em;
            padding: 10px 22px;
        }
        
        .date-input {
            padding: 10px 18px;
            border: 2px solid #d4845c;
            border-radius: 12px;
            font-size: 0.95em;
            width: auto;
        }
    </style>
</head>
<body>
    <div class="weather-indicator" id="weatherIcon">‚òÄÔ∏è</div>
    <div class="rain" id="rainContainer"></div>
    
    <div class="container">
        <div id="loginScreen">
            <div class="login-emoji">‚ú®</div>
            <h1>365 D√≠as de Luz</h1>
            <p class="subtitle">Un a√±o de mensajes que iluminar√°n tu camino</p>
            
            <div class="input-group">
                <label for="userName">Tu nombre:</label>
                <input type="text" id="userName" placeholder="Escribe tu nombre" required>
            </div>
            
            <div class="input-group">
                <label for="userBirthday">Tu fecha de nacimiento:</label>
                <input type="date" id="userBirthday" required>
            </div>
            
            <button onclick="login()">üéÅ Comenzar mi viaje</button>
        </div>

        <div id="calendarScreen" class="hidden">
            <div class="user-greeting" id="greeting"></div>
            
            <div class="page-header">
                <div class="day-number" id="dayNumber">D√≠a 1</div>
                <div class="date-display" id="dateDisplay"></div>
            </div>

            <div class="theme-badge" id="themeBadge">Fortaleza y Comienzos</div>
            
            <div id="birthdaySpecial"></div>
            
            <div class="message-box" id="messageBox">
                <div class="day-icon" id="dayIcon">üí´</div>
                <p class="message-text" id="messageText"></p>
                <span class="hashtag" id="hashtag">#EresLuz</span>
            </div>

            <div class="reflection-box">
                <label>‚úçÔ∏è ¬øC√≥mo te sientes hoy? (Opcional)</label>
                <textarea id="reflectionText" placeholder="Escribe aqu√≠ tus pensamientos del d√≠a..."></textarea>
            </div>
            
            <div>
                <button onclick="showToday()">üìÖ Hoy</button>
                <button onclick="previousDay()">‚Üê Anterior</button>
                <button id="nextBtn" onclick="nextDay()">Siguiente ‚Üí</button>
            </div>
            <br>
            <div>
                <button onclick="toggleNightMode()">üåô Modo Noche</button>
                <button onclick="activateRainMode()">üåßÔ∏è Modo Lluvia</button>
                <button onclick="resetModes()">‚òÄÔ∏è Modo Normal</button>
            </div>
            <br>
            <input type="date" id="datePicker" class="date-input" onchange="goToDate()">
            <br><br>
            <button class="logout-btn" onclick="logout()">üö™ Cerrar Sesi√≥n</button>
        </div>
    </div>

    <script>
        let currentDate = new Date();
        let userData = null;
        let reflections = {};
        let isDarkMode = false;
        let isRaining = false;
        
        const phrases = "Tu sonrisa tiene poder, √∫sala hoy.|üòä|No necesitas hacerlo perfecto, solo hacerlo con el coraz√≥n.|üíñ|Eres suficiente, incluso en tus d√≠as m√°s simples.|‚ú®|Hoy es un buen d√≠a para empezar de nuevo.|üåÖ|Cada paso peque√±o cuenta, no lo olvides.|üë£|La calma tambi√©n es progreso.|üåä|Tienes un brillo que nadie puede copiar.|‚≠ê|Lo que haces con amor siempre deja huella.|üíù|Respira, vas bien.|üå¨Ô∏è|No corras, las flores no florecen de prisa.|üå∏|Mereces todo lo bonito que est√°s buscando.|üå∫|Lo que das, vuelve.|üîÑ|Eres m√°s fuerte de lo que piensas.|üí™|Tu energ√≠a cambia los lugares donde vas.|‚ú®|Hoy elige verte con cari√±o.|üíï|Lo est√°s intentando, y eso ya vale mucho.|üåü|No necesitas validaci√≥n para ser valiosa.|üëë|A veces descansar tambi√©n es avanzar.|üõèÔ∏è|Cada d√≠a puedes reinventarte un poco.|ü¶ã|Eres luz, aunque no todos lo noten.|üí°|No te compares, tu historia es √∫nica.|üìñ|Los d√≠as buenos llegan, ten paciencia.|‚è≥|Agradece lo que tienes, y ver√°s m√°s motivos para sonre√≠r.|üôè|Hoy, elige la paz antes que la prisa.|‚òÆÔ∏è|Tu voz importa, √∫sala con amor.|üó£Ô∏è|Has superado tanto, no lo olvides.|üèîÔ∏è|Lo mejor a√∫n no ha llegado.|üéÅ|No necesitas ser m√°s, solo ser t√∫.|üåà|A veces el alma solo necesita un respiro.|üå¨Ô∏è|Las cosas buenas toman tiempo.|‚è∞|Tu presencia ya es un regalo.|üéÄ|Hoy elige ser amable contigo misma.|üíó|No te castigues por sentir.|üíô|Lo que hoy te pesa, ma√±ana puede ense√±arte.|üìö|Sigue adelante, incluso si es despacio.|üê¢|Cada error te ha acercado a algo valioso.|üíé|No apagues tu luz por miedo a brillar.|üí´|Tienes tanto por dar.|üéÅ|No necesitas tener todo claro para avanzar.|üß≠|Perm√≠tete disfrutar, sin culpa.|üåª|Tu coraz√≥n sabe m√°s de lo que imaginas.|‚ù§Ô∏è|Sonr√≠e, hoy puede ser un buen comienzo.|üòä|Las cosas cambian, y t√∫ tambi√©n puedes hacerlo.|üîÑ|No subestimes lo lejos que has llegado.|üó∫Ô∏è|Tu bondad es una fuerza.|üåü|No todo tiene que tener sentido ahora.|üåô|Hoy tambi√©n cuenta, incluso si fue tranquilo.|üçÉ|Haz espacio para lo que te hace bien.|üè°|Lo simple tambi√©n puede ser hermoso.|üåø|Conf√≠a en el proceso.|üîÆ|Tienes permiso para descansar.|üò¥|Hoy puedes elegir ver lo bueno.|üëÄ|No te apures, el sol tambi√©n tarda en salir.|üåÖ|Eres capaz, incluso cuando dudas.|üí™|No hay prisa para florecer.|üå∑|Cada d√≠a trae una nueva oportunidad.|üåÑ|Est√°s haciendo lo mejor que puedes.|üåü|No necesitas demostrar nada, ya vales.|üëë|A veces, solo necesitas respirar profundo.|üå¨Ô∏è|La ternura tambi√©n es fortaleza.|üå∏|Has crecido m√°s de lo que notas.|üå±|Hoy es un buen d√≠a para agradecer.|üôè|No te rindas por cansancio, descansa.|üòå|Eres parte de algo bonito.|üå∫|Aunque no lo veas, est√°s avanzando.|üö∂|Tu forma de cuidar tambi√©n cuenta.|üíû|No temas empezar de cero, ah√≠ nace la fuerza.|üî•|Mereces calma.|üïäÔ∏è|Tienes un coraz√≥n valiente.|üíñ|Hoy, date cr√©dito por todo lo que lograste.|üèÜ|No necesitas ser productiva para tener valor.|‚ú®|Eres suficiente, incluso en silencio.|ü§´|A veces, la esperanza llega despacio.|üå§Ô∏è|Tienes derecho a elegir tu propio ritmo.|üéµ|La bondad siempre vuelve.|üîÑ|No todo lo bonito se ve, algunas cosas se sienten.|üí´|No est√°s sola, el mundo tambi√©n te sostiene.|üåç|Las peque√±as victorias importan.|üéâ|Lo que sue√±as no es imposible.|üå†|Cree en ti, aunque sea un poquito m√°s.|‚≠ê|Eres m√°s capaz de lo que imaginas.|üí™|Hoy, elige no exigirte tanto.|üåº|Agradece tus pasos, incluso los torpes.|üë£|Est√°s aprendiendo, no fallando.|üìö|La vida tambi√©n se disfruta lento.|üêå|No necesitas tener todas las respuestas.|‚ùì|Tu manera de ser ya es hermosa.|üåπ|Hoy, suelta lo que no puedas controlar.|üéà|Las cosas buenas tambi√©n te merecen a ti.|üíù|No te olvides de celebrar tus avances.|üéä|El tiempo no cura todo, pero ense√±a.|‚è≥|Hoy, si puedes, sonr√≠e un poco m√°s.|üòä|Eres un trabajo en progreso, y eso est√° bien.|üîß|Tu ternura cambia el mundo.|üåé|Nadie m√°s puede ser t√∫, y eso es tu magia.|‚ú®|Hoy tambi√©n mereces amor.|‚ù§Ô∏è|Lo que te hace diferente, te hace brillar.|üíé|No todo se mide en resultados.|üìä|Perm√≠tete sentir orgullo de ti.|ü¶Å|Est√°s creciendo incluso sin darte cuenta.|üå≥|La calma llega cuando conf√≠as.|üåä|No apagues tu entusiasmo.|üî•|Tus pasos son valientes, aunque sean peque√±os.|üë£|Hoy puedes empezar otra vez.|üåÖ|Eres parte de algo m√°s grande.|üåå|No te sientas mal por necesitar tiempo.|‚è∞|Cada d√≠a te acerca a tu mejor versi√≥n.|ü¶ã|Tus sue√±os tambi√©n merecen espacio.|üí≠|Eres un ser de luz, aunque no siempre brilles igual.|üí°|No tienes que tenerlo todo bajo control.|üéÆ|Tienes derecho a descansar sin culpa.|üõå|Tu esfuerzo tiene valor.|üèÖ|Hoy, elige ser paciente contigo.|‚è≥|Todo lo que siembras desde el amor florece.|üåª|Eres valiente por seguir intentando.|ü¶∏|Lo importante no es la velocidad, sino el rumbo.|üß≠|Eres m√°s constante de lo que crees.|‚õ∞Ô∏è|A veces rendirse al descanso tambi√©n es sabio.|üòå|No necesitas validaci√≥n para sentirte bien.|üí´|Tu paz vale m√°s que la aprobaci√≥n.|‚òÆÔ∏è|Est√°s aprendiendo a quererte, y eso es hermoso.|üíó|La magia est√° en las cosas peque√±as.|‚ú®|Hoy, agradece lo simple.|üçÇ|Eres resiliente, aunque no lo notes.|üí™|No te olvides de mirar al cielo.|‚òÅÔ∏è|Lo est√°s haciendo bien, de verdad.|üëç|La felicidad no se busca, se cultiva.|üå±|Hoy, conf√≠a un poco m√°s en la vida.|üåà|Eres luz incluso en los d√≠as nublados.|üå•Ô∏è|Tu ternura es un regalo.|üéÅ|Cada d√≠a cuenta, incluso los lentos.|üìÜ|No necesitas ser fuerte todo el tiempo.|üõ°Ô∏è|El descanso tambi√©n es parte del camino.|üö∂|Eres importante, aunque no te lo digan.|‚≠ê|Hoy, elige soltar el peso que no te pertenece.|üéà|Lo que das con amor, vuelve multiplicado.|üíï|Est√°s aprendiendo a vivir, no a rendirte.|üåü|Tu forma de amar hace la diferencia.|üíñ|Hoy, cree en la posibilidad de cosas buenas.|üå†|Eres m√°s valiente de lo que imaginas.|ü¶Å|No necesitas correr, vas bien.|üö∂|La esperanza siempre encuentra el camino.|üåÖ|No tienes que tener un plan perfecto.|üìù|Est√°s exactamente donde debes estar.|üìç|La vida tambi√©n es esto: intentarlo.|üéØ|No te juzgues por tus pausas.|‚è∏Ô∏è|Eres un coraz√≥n que sigue latiendo, y eso ya es mucho.|üíì|Hoy, elige calma en lugar de miedo.|üïäÔ∏è|Lo que hoy te cuesta, ma√±ana te fortalecer√°.|üí™|No te rindas, el cambio tarda pero llega.|üå±|Tienes tanto amor dentro, comp√°rtelo contigo tambi√©n.|üíù|Est√°s floreciendo, incluso si no lo notas.|üå∫|Hoy, conf√≠a en tu camino.|üõ§Ô∏è|Tu existencia ya es suficiente.|‚ú®|No necesitas ser m√°s, solo ser aut√©ntica.|üåü|Eres una historia hermosa en proceso.|üìñ|A veces lo mejor es simplemente seguir.|‚û°Ô∏è|Hoy, abr√°zate con paciencia.|ü§ó|Lo est√°s haciendo bien, aunque no lo veas.|üëÄ|Cada d√≠a es una oportunidad para renacer.|üåÑ|Eres capaz, incluso cuando lo dudas.|üí™|Hoy, sonr√≠e aunque no haya motivo.|üòä|No te olvides de cuidar tu energ√≠a.|‚ö°|La bondad siempre deja huella.|üë£|Eres motivo de inspiraci√≥n.|üí´|Lo que hoy siembras, ma√±ana florece.|üå∑|Est√°s aprendiendo a brillar sin miedo.|‚ú®|No subestimes tu crecimiento.|üìà|Hoy, respira y sigue.|üå¨Ô∏è|Eres m√°s fuerte de lo que sientes hoy.|üí™|El universo no se ha olvidado de ti.|üåå|Lo est√°s logrando, poco a poco.|üéØ|Hoy, elige la paz por encima del ruido.|üîá|Eres una persona incre√≠ble.|üåü|Todo tiene su momento, conf√≠a.|‚è∞|No te castigues por los tropiezos.|ü©π|Eres arte, aunque no siempre te veas as√≠.|üé®|Hoy, permite que la vida te sorprenda.|üéÅ|Eres parte de algo luminoso.|‚ú®|No pierdas la fe en lo que sue√±as.|üí≠|Tu luz gu√≠a m√°s de lo que imaginas.|üî¶|Hoy, haz algo que te haga bien.|üíö|Eres valiosa sin tener que demostrarlo.|üíé|Lo que hoy te duele, te est√° transformando.|ü¶ã|Mereces d√≠as suaves.|‚òÅÔ∏è|Hoy, deja que tu alma respire.|üå¨Ô∏è|Eres suficiente, tal como est√°s.|‚ú®|No necesitas m√°s, ya tienes lo esencial.|üíù|Hoy, date tiempo.|‚è≥|Est√°s aprendiendo a quererte con calma.|üíó|La ternura tambi√©n es un acto de fuerza.|üå∏|No te compares, tu ritmo es perfecto.|üéµ|Eres luz, incluso cuando brillas poquito.|üí°|Hoy, agradece lo que s√≠ tienes.|üôè|Tu esencia es hermosa.|üåπ|Est√°s haciendo lo mejor que puedes, y eso basta.|üëè|Hoy, respira y conf√≠a.|üå¨Ô∏è|Eres un milagro cotidiano.|‚ú®|Lo que sue√±as, puede ser real.|üå†|Est√°s creciendo, incluso en silencio.|üå±|Hoy, elige ver lo bonito.|üëÅÔ∏è|Tu paz es prioridad.|‚òÆÔ∏è|No te olvides de disfrutar el presente.|üéÅ|Eres un alma fuerte y sensible.|üíñ|Hoy, da un paso m√°s, sin miedo.|üë£|Tu camino tiene sentido.|üõ§Ô∏è|Eres inspiraci√≥n para m√°s de una persona.|üí´|Hoy, conf√≠a en tus decisiones.|‚úîÔ∏è|La vida tambi√©n se trata de aprender a soltar.|üéà|Eres suficiente, no necesitas compararte.|‚≠ê|Hoy, celebra tu historia.|üéâ|Tienes tanto por descubrir a√∫n.|üîç|Eres capaz de crear belleza con lo que tienes.|üé®|Hoy, abraza tus emociones.|ü§ó|Est√°s sanando, incluso si no lo notas.|ü©π|Tu esfuerzo no pasa desapercibido.|üëÄ|Hoy, cree un poco m√°s en ti.|üí™|Eres m√°s amor que miedo.|‚ù§Ô∏è|No todo lo bueno tiene que doler.|üåà|Hoy, deja que las cosas fluyan.|üåä|Eres la prueba de que se puede.|üèÜ|Lo que te hace diferente, te hace √∫nica.|üíé|Hoy, respira sin prisa.|üå¨Ô∏è|Eres parte de algo bonito, aunque no lo veas.|üå∫|Hoy, conf√≠a en que todo mejora.|üìà|Tu luz no depende del clima.|‚òÄÔ∏è|Est√°s aprendiendo a cuidarte.|üíö|Hoy, date un momento solo para ti.|üßò|Eres suficiente, incluso en pausa.|‚è∏Ô∏è|No todo debe ser perfecto para ser hermoso.|üå∏|Hoy, agradece tus avances.|üìä|Eres fuerza en calma.|üåä|Hoy, elige amor en lugar de miedo.|üíï|Est√°s creciendo con cada intento.|üå±|Tu ternura cambia el d√≠a de alguien.|üåº|Hoy, sonr√≠e sin raz√≥n.|üòä|Eres resiliente y capaz.|üí™|No olvides lo lejos que has llegado.|üó∫Ô∏è|Hoy, deja que la vida te abrace.|ü§ó|Eres parte de algo que vale la pena.|‚ú®|Hoy, conf√≠a en el proceso.|üîÑ|Est√°s brillando, aunque no lo notes.|üí´|Eres amor en movimiento.|‚ù§Ô∏è|Hoy, date cr√©dito por seguir.|üèÖ|Eres m√°s que suficiente.|üëë|Hoy, encuentra belleza en lo simple.|üçÉ|Est√°s haciendo lo mejor que puedes.|üåü|Eres un recordatorio de esperanza.|üåÖ|Hoy, suelta la culpa.|üéà|Eres paz, cuando eliges serlo.|‚òÆÔ∏è|Hoy, abr√°zate con cari√±o.|ü§ó|Eres parte de algo m√°s grande.|üåå|Hoy, conf√≠a en ti sin dudar.|üí™|Tu alma merece descanso.|üò¥|Hoy, elige ver el lado bueno.|üòä|Eres el sol de muchos d√≠as grises.|‚òÄÔ∏è|Hoy, no te exijas tanto.|üå∏|Eres hermosa en todas tus versiones.|üåπ|Hoy, perm√≠tete sentir sin miedo.|üíô|Eres m√°s capaz de lo que piensas.|üí™|Hoy, respira y suelta.|üå¨Ô∏è|Tu historia sigue en construcci√≥n.|üèóÔ∏è|Hoy, agradece por existir.|üôè|Eres amor, y eso basta.|‚ù§Ô∏è|Hoy, recuerda que vales mucho.|üíé|Est√°s aprendiendo a florecer.|üå∫|Hoy, conf√≠a en tu fuerza.|üí™|Eres un coraz√≥n valiente.|ü¶Å|Hoy, descansa sin culpa.|üòå|Eres capaz de lograr cosas grandes.|üèÜ|Hoy, busca la calma dentro.|üßò|Eres parte de algo lleno de luz.|‚ú®|Hoy, sonr√≠e a la vida.|üòä|Est√°s haciendo lo correcto para ti.|‚úîÔ∏è|Hoy, cree en los finales felices.|üåà|Eres luz para ti y para otros.|üí°|Hoy, elige la ternura.|üíó|Eres suficiente, siempre.|‚≠ê|Hoy, aprecia lo que ya tienes.|üôè|Eres fuerza y dulzura.|üå∏|Hoy, deja que la esperanza te gu√≠e.|üåü|Eres el motivo de un buen recuerdo.|üì∏|Hoy, s√© paciente contigo.|‚è≥|Eres valiente por seguir aqu√≠.|üí™|Hoy, conf√≠a en tu intuici√≥n.|üîÆ|Eres alguien que merece amor verdadero.|üíñ|Hoy, agradece tu camino.|üõ§Ô∏è|Eres inspiraci√≥n incluso en silencio.|üåô|Hoy, da un paso m√°s con fe.|üë£|Eres parte de algo hermoso.|üå∫|Hoy, recuerda que puedes empezar otra vez.|üåÖ|Eres magia sin intentarlo.|‚ú®|Hoy, suelta lo que ya no necesitas.|üéà|Eres motivo de alegr√≠a.|üòä|Hoy, celebra tu existencia.|üéâ|Eres constancia disfrazada de calma.|üåä|Hoy, recuerda que todo pasa.|‚è∞|Eres m√°s que tus errores.|‚≠ê|Hoy, elige vivir con gratitud.|üôè|Eres luz, incluso cuando no lo creas.|üí°|Hoy, date permiso para descansar.|üõå|Eres importante para alguien.|üíù|Hoy, suelta el miedo.|üéà|Eres una historia en evoluci√≥n.|üìñ|Hoy, conf√≠a en los peque√±os milagros.|‚ú®|Eres suficiente sin condiciones.|üíñ|Hoy, cree en tus posibilidades.|üåü|Eres parte de algo bueno.|üåà|Hoy, abraza lo que eres.|ü§ó|Eres m√°s fuerte que tus dudas.|üí™|Hoy, elige amor sobre todo.|‚ù§Ô∏è|Eres una chispa de esperanza.|‚ú®|Hoy, disfruta lo que haces.|üòä|Eres capaz de todo lo que sue√±as.|üå†|Hoy, s√© amable contigo.|üíó|Eres luz en medio de la tormenta.|‚õàÔ∏è|Hoy, agradece lo que aprendiste.|üìö|Eres un alma hermosa.|üí´|Hoy, conf√≠a en el futuro.|üîÆ|Eres un faro para los dem√°s.|üóº|Hoy, respira y sigue adelante.|üå¨Ô∏è|Eres amor, calma y fuerza.|üí™|Hoy, no te olvides de sonre√≠r.|üòä|Eres una historia de resiliencia.|üìñ|Hoy, conf√≠a en que todo se acomoda.|üß©|Eres hermosa tal como eres.|üåπ|Hoy, elige ver lo bueno en ti.|üëÅÔ∏è|Eres la prueba de que la luz vuelve.|üåÖ|Hoy, suelta lo que pesa.|üéà|Eres parte de algo lleno de sentido.|üåü|Hoy, celebra tus peque√±as victorias.|üéä|Eres un alma en expansi√≥n.|üåå|Hoy, elige cuidarte.|üíö|Eres todo lo que necesitas ser.|‚ú®|Hoy, cree que mereces cosas buenas.|üéÅ|Eres m√°s fuerte que tus miedos.|üí™|Hoy, agradece el presente.|üéÅ|Eres un coraz√≥n lleno de amor.|‚ù§Ô∏è|Hoy, descansa sin remordimientos.|üò¥|Eres √∫nica y eso te hace especial.|üíé|Hoy, sigue creyendo en ti.|‚≠ê|Eres la calma que buscas.|üåä|Hoy, conf√≠a en el tiempo.|‚è∞|Eres capaz de volver a empezar.|üåÖ|Hoy, deja que la vida fluya.|üåä|Eres digna de amor, siempre.|üíñ|Hoy, agradece lo que fuiste y lo que eres.|üôè|Eres una promesa cumplida.|‚úÖ|Hoy, conf√≠a en el poder de lo simple.|üçÉ|Eres el abrazo que el mundo necesita.|ü§ó|Hoy, deja espacio para la esperanza.|üåü|Eres un recordatorio de bondad.|üíù|Hoy, vive con ligereza.|üéà|Eres todo lo que necesitas ser.|‚ú®|Hoy, elige paz.|‚òÆÔ∏è|Eres m√°s valiente de lo que crees.|ü¶Å|Hoy, conf√≠a en tu proceso.|üîÑ|Eres amor en forma humana.|üíó|Hoy, sonr√≠e por lo lejos que has llegado.|üòä|Eres una historia digna de orgullo.|üìñ|Hoy, agradece por ti.|üôè|Eres la prueba de que se puede.|üèÜ|Hoy, conf√≠a en que todo saldr√° bien.|üåà|Eres suficiente, y siempre lo ser√°s.|‚≠ê";
        
        const messages = phrases.split('|').reduce((acc, item, index, arr) => {
            if (index % 2 === 0 && arr[index + 1]) {
                acc.push({ text: item, icon: arr[index + 1] });
            }
            return acc;
        }, []);

        const monthlyThemes = [
            { month: 0, name: "Fortaleza y Comienzos", icon: "üåÖ" },
            { month: 1, name: "Cari√±o y Gratitud", icon: "üíù" },
            { month: 2, name: "Sue√±os y Metas", icon: "üåü" },
            { month: 3, name: "Renovaci√≥n y Crecimiento", icon: "üå±" },
            { month: 4, name: "Alegr√≠a y Celebraci√≥n", icon: "üéâ" },
            { month: 5, name: "Luz y Energ√≠a", icon: "‚òÄÔ∏è" },
            { month: 6, name: "Libertad y Aventura", icon: "ü¶ã" },
            { month: 7, name: "Reflexi√≥n y Paz", icon: "üåä" },
            { month: 8, name: "Sabidur√≠a y Aprendizaje", icon: "üìö" },
            { month: 9, name: "Cosecha y Abundancia", icon: "üçÇ" },
            { month: 10, name: "Agradecimiento", icon: "üôè" },
            { month: 11, name: "Magia y Esperanza", icon: "‚ú®" }
        ];

        const hashtags = ["#EresLuz", "#D√≠aBrillante", "#MotivoDeAlegr√≠a", "#TuEsencia", "#Energ√≠aPositiva", "#ValorInterior", "#BrillaPorTi", "#T√∫Importas", "#AmorPropio", "#FuerzaInterior", "#CadaD√≠aCuenta", "#T√∫Brillas", "#AlmaHermosa", "#TuPresencia", "#EresMagia", "#TuVoz", "#Coraz√≥nValiente", "#Esencia√önica", "#TuSonrisa", "#GraciasPorSer"];

        function checkTimeAndApplyMode() {
            const hour = new Date().getHours();
            if (hour >= 20 || hour < 6) {
                document.body.classList.add('night-mode');
                document.getElementById('weatherIcon').textContent = 'üåô';
                document.getElementById('themeColor').setAttribute('content', '#2c3e50');
            }
        }

        function toggleNightMode() {
            isDarkMode = !isDarkMode;
            if (isDarkMode) {
                document.body.classList.add('night-mode');
                document.getElementById('weatherIcon').textContent = 'üåô';
                document.getElementById('themeColor').setAttribute('content', '#2c3e50');
            } else {
                document.body.classList.remove('night-mode');
                document.getElementById('weatherIcon').textContent = '‚òÄÔ∏è';
                document.getElementById('themeColor').setAttribute('content', '#ffecd2');
            }
        }

        function activateRainMode() {
            isRaining = true;
            document.body.classList.add('rainy-mode');
            document.getElementById('weatherIcon').textContent = 'üåßÔ∏è';
            const rainContainer = document.getElementById('rainContainer');
            rainContainer.innerHTML = '';
            for (let i = 0; i < 100; i++) {
                const drop = document.createElement('div');
                drop.className = 'raindrop';
                drop.style.left = Math.random() * 100 + '%';
                drop.style.animationDuration = (Math.random() * 0.5 + 0.5) + 's';
                drop.style.animationDelay = Math.random() * 2 + 's';
                rainContainer.appendChild(drop);
            }
        }

        function resetModes() {
            isRaining = false;
            isDarkMode = false;
            document.body.classList.remove('rainy-mode', 'night-mode');
            document.getElementById('weatherIcon').textContent = '‚òÄÔ∏è';
            document.getElementById('rainContainer').innerHTML = '';
            document.getElementById('themeColor').setAttribute('content', '#ffecd2');
            checkTimeAndApplyMode();
        }

        function getDayOfYear(date) {
            const start = new Date(date.getFullYear(), 0, 1);
            return Math.floor((date - start) / 86400000) + 1;
        }

        function isBirthday(date, birthdayDate) {
            const checkDate = new Date(date.getTime());
            const birthDate = new Date(birthdayDate.getTime());
            checkDate.setHours(12, 0, 0, 0);
            birthDate.setHours(12, 0, 0, 0);
            return checkDate.getMonth() === birthDate.getMonth() && checkDate.getDate() === birthDate.getDate();
        }

        function createConfetti() {
            const colors = ['#ff9a76', '#ffd700', '#ff69b4', '#87ceeb', '#98fb98', '#ffb6c1', '#dda0dd', '#f0e68c'];
            const shapes = ['‚óè', '‚ñ†', '‚ñ≤', '‚òÖ', '‚ô•', '‚ô¶'];
            for (let i = 0; i < 200; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.textContent = shapes[Math.floor(Math.random() * shapes.length)];
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.color = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.fontSize = (Math.random() * 20 + 15) + 'px';
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    confetti.style.animationDuration = (Math.random() * 2 + 3) + 's';
                    document.body.appendChild(confetti);
                    setTimeout(() => confetti.remove(), 5000);
                }, i * 15);
            }
        }

        function createBalloons() {
            const balloonEmojis = ['üéà', 'üéà', 'üéà', 'üéä', 'üéâ'];
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    const balloon = document.createElement('div');
                    balloon.className = 'balloon';
                    balloon.textContent = balloonEmojis[Math.floor(Math.random() * balloonEmojis.length)];
                    balloon.style.left = Math.random() * 100 + '%';
                    balloon.style.bottom = '-50px';
                    balloon.style.animationDelay = Math.random() * 2 + 's';
                    balloon.style.animationDuration = (Math.random() * 2 + 3) + 's';
                    document.getElementById('birthdaySpecial').appendChild(balloon);
                    setTimeout(() => balloon.remove(), 6000);
                }, i * 400);
            }
        }

        function createStars(container) {
            const starPositions = [
                { top: '10%', left: '10%', delay: '0s' },
                { top: '20%', left: '85%', delay: '0.3s' },
                { top: '70%', left: '15%', delay: '0.6s' },
                { top: '65%', left: '80%', delay: '0.9s' },
                { top: '40%', left: '5%', delay: '1.2s' },
                { top: '35%', left: '90%', delay: '1.5s' }
            ];
            starPositions.forEach(pos => {
                const star = document.createElement('div');
                star.className = 'star';
                star.textContent = '‚ú®';
                star.style.top = pos.top;
                star.style.left = pos.left;
                star.style.animationDelay = pos.delay;
                container.appendChild(star);
            });
        }

        function login() {
            const name = document.getElementById('userName').value;
            const birthdayInput = document.getElementById('userBirthday').value;
            if (!name || !birthdayInput) return alert('Por favor completa todos los campos');
            
            const [year, month, day] = birthdayInput.split('-');
            const birthday = new Date(parseInt(year), parseInt(month) - 1, parseInt(day), 12, 0, 0);
            
            userData = {name, birthday};
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('calendarScreen').classList.remove('hidden');
            document.getElementById('greeting').textContent = `Hola, ${name} üå∏`;
            checkTimeAndApplyMode();
            updateDisplay();
        }

        function logout() {
            userData = null;
            currentDate = new Date();
            reflections = {};
            document.getElementById('calendarScreen').classList.add('hidden');
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('userName').value = '';
            document.getElementById('userBirthday').value = '';
        }

        function updateDisplay() {
            const today = new Date();
            today.setHours(0,0,0,0);
            const selected = new Date(currentDate);
            selected.setHours(0,0,0,0);
            
            const dayOfYear = getDayOfYear(currentDate);
            const message = messages[dayOfYear - 1] || messages[0];
            const currentMonth = currentDate.getMonth();
            const theme = monthlyThemes.find(t => t.month === currentMonth);
            
            document.getElementById('dayNumber').textContent = `D√≠a ${dayOfYear}`;
            document.getElementById('dateDisplay').textContent = currentDate.toLocaleDateString('es-ES', {weekday: 'long', day: 'numeric', month: 'long', year: 'numeric'});
            document.getElementById('themeBadge').textContent = `${theme.icon} ${theme.name}`;
            document.getElementById('themeBadge').className = `theme-badge month-${currentMonth}`;
            document.getElementById('messageBox').className = `message-box month-${currentMonth}`;
            document.getElementById('datePicker').valueAsDate = currentDate;
            document.body.className = `month-${currentMonth}`;
            
            const buttons = document.querySelectorAll('button:not(.logout-btn)');
            buttons.forEach(btn => btn.className = `month-${currentMonth}`);
            
            const dateKey = selected.toDateString();
            document.getElementById('reflectionText').value = reflections[dateKey] || '';
            
            const birthdaySpecial = document.getElementById('birthdaySpecial');
            
            if (userData && isBirthday(selected, userData.birthday)) {
                createConfetti();
                createBalloons();
                birthdaySpecial.innerHTML = `
                    <div class="birthday-message">
                        <div class="birthday-stars"></div>
                        <div class="birthday-emoji">üéÇ</div>
                        <h2 class="birthday-text" style="color: #8b4513; margin: 20px 0; font-size: 2.2em;">¬°FELIZ CUMPLEA√ëOS, ${userData.name.toUpperCase()}!</h2>
                        <p class="birthday-text" style="font-size: 1.4em; color: #8b4513; margin: 15px 0;">üéâ Este es tu d√≠a especial üéâ</p>
                        <p class="birthday-text" style="margin-top: 15px; color: #8b4513; font-style: italic; font-size: 1.1em;">Que todos tus sue√±os se hagan realidad ‚ú®</p>
                        <p class="birthday-text" style="margin-top: 15px; color: #8b4513; font-size: 1.1em;">El mundo celebra tu existencia hoy üåü</p>
                        <div style="margin-top: 25px; font-size: 2em;">üéä üéÅ üéà üéâ üéÇ</div>
                    </div>
                `;
                setTimeout(() => {
                    const starsContainer = birthdaySpecial.querySelector('.birthday-stars');
                    if (starsContainer) createStars(starsContainer);
                }, 100);
            } else {
                birthdaySpecial.innerHTML = '';
            }
            
            if (selected > today) {
                document.getElementById('dayIcon').textContent = 'üîí';
                document.getElementById('messageText').innerHTML = '<span class="locked-message">Este mensaje estar√° disponible cuando llegue este d√≠a especial. ¬°Ten paciencia! üíñ</span>';
                document.getElementById('hashtag').textContent = '#ProntoLlegar√°';
                document.getElementById('nextBtn').disabled = true;
                document.getElementById('reflectionText').disabled = true;
            } else {
                document.getElementById('dayIcon').textContent = message.icon;
                document.getElementById('messageText').textContent = message.text;
                document.getElementById('hashtag').textContent = hashtags[dayOfYear % hashtags.length];
                document.getElementById('reflectionText').disabled = false;
                
                const tomorrow = new Date(selected);
                tomorrow.setDate(tomorrow.getDate() + 1);
                document.getElementById('nextBtn').disabled = tomorrow > today;
            }
            
            const msgBox = document.getElementById('messageBox');
            msgBox.style.animation = 'none';
            setTimeout(() => msgBox.style.animation = 'fadeIn 0.8s ease forwards', 10);
        }

        document.getElementById('reflectionText').addEventListener('input', function() {
            const dateKey = new Date(currentDate).toDateString();
            reflections[dateKey] = this.value;
        });

        function showToday() {
            currentDate = new Date();
            updateDisplay();
        }

        function previousDay() {
            currentDate.setDate(currentDate.getDate() - 1);
            updateDisplay();
        }

        function nextDay() {
            currentDate.setDate(currentDate.getDate() + 1);
            updateDisplay();
        }

        function goToDate() {
            const selected = document.getElementById('datePicker').valueAsDate;
            if (selected) {
                currentDate = new Date(selected);
                currentDate.setHours(12);
                updateDisplay();
            }
        }

        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(reg => console.log('Service Worker registrado'))
                    .catch(err => console.log('Service Worker no disponible'));
            });
        }
        
        checkTimeAndApplyMode();
    </script>
</body>
</html>
